<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ajaxTest</title>
</head>
<body>
	<ul class="container"></ul>
	<script>
		const container = document.querySelector(".container");

		const APPID = '5e291601749826c80cf9a382c7de31e3';
		function getWeather(city, units, cnt) {
			const xhr = new XMLHttpRequest();
			const url = `http://api.openweathermap.org/data/2.5/forecast/daily?q=${city}&units=${units}&cnt=${cnt}&APPID=${APPID}`;
			xhr.onreadystatechange = function(e) {
				if(xhr.readyState==4 && xhr.status==200) {
					const weathers = JSON.parse(xhr.responseText).list;
					const toDate = (nums) => {
						const d = new Date(nums);
						return d;
						// return d.toLocaleDateString();
					};
					// console.log(JSON.parse(xhr.responseText));
					// console.log(weathers[0].temp.day);
					// 遍历 weathers，每次都添加一个 li 到 ul 中
					weathers.map((weather) => {
						const li = document.createElement("li");
						const dt = toDate(weather.dt);
						li.innerHTML = `${dt} day temprature is ${weather.temp.day}`;
						container.appendChild(li);
					});
				}
			};
			xhr.open("GET", url, true);
			xhr.send();
		}
		getWeather('Beijing', 'metric', '3');
	</script>
</body>
</html>